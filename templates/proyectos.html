{% extends "base.html" %}
{% load static %}
{% block title %}Proyectos — Portafolio{% endblock %}
{% block content %}
<section class="mb-10">
  <h1 class="section-title text-2xl mb-4">Proyectos destacados</h1>

  <!-- TEST TEMPORAL: debe mostrar la portada de "condominio" sí o sí -->
  <img src="/static/img/projects/condominio-cover.jpg"
       alt="TEST condominio"
       style="width:100%;max-width:480px;height:200px;object-fit:cover;border:2px solid #8B5CF6;border-radius:12px;margin-bottom:12px;" />

  <div class="projects">
    {% for p in proyectos %}
    <article class="card p-4">
      <!-- Portada local por convención: static/img/projects/<slug>-cover.jpg -->
      <img
        src="{% static 'img/projects/' %}{{ p.slug }}-cover.jpg"
        alt="Portada de {{ p.titulo }}"
        style="width:100%; height:160px; object-fit:cover; border-radius:12px; border:1px dashed #DDD6FE;"
      />

      <h2 class="font-semibold text-lg mt-3">{{ p.titulo }}</h2>

      {% if p.resumen %}
        <p class="muted text-sm mt-1">{{ p.resumen }}</p>
      {% endif %}

      {% if p.tags.all %}
      <div class="mt-2 flex flex-wrap gap-2 text-xs">
        {% for t in p.tags.all %}
          <span class="badge">{{ t.nombre }}</span>
        {% endfor %}
      </div>
      {% endif %}

      <div class="mt-3 flex gap-2">
        {% if p.repo_url %}
          <a class="btn btn-outline" target="_blank" href="{{ p.repo_url }}">GitHub</a>
        {% endif %}
        <a class="btn btn-primary" href="{% url 'proyecto_detalle' p.slug %}">Ver detalle</a>
      </div>
    </article>
    {% empty %}
      <p class="muted">Aún no hay proyectos publicados.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
